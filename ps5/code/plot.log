
  ___  ____  ____  ____  ____ ©
 /__    /   ____/   /   ____/      17.0
___/   /   /___/   /   /___/       SE—Standard Edition

 Statistics and Data Science       Copyright 1985-2021 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-STATA-PC        https://www.stata.com
                                   979-696-4600        stata@stata.com

Stata license: Unlimited-user , expiring 19 Feb 2023
Serial number: 401709301093
  Licensed to: Yuci Zhou
               Princeton University

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. Maximum number of variables is set to 5,000; see help set_maxvar.

. do "plot.do" 

. clear all

. set scheme Modern

. 
. program main
  1.     load_kalman
  2.     merge 1:1 _n using ../output/forecast, assert(1 2 3) keep(1 2 3) ///
>         nogen
  3.     gen filtered_s_plot = filtered_s[_n - 1]
  4.     twoway (line f_pi filtered_s_plot pi t, ///
>             lcolor(maroon ebblue gs12) lpattern(solid solid dash)), ///
>         legend(order(1 "MA(1) forecast" 2 "Kalman filter" 3 "Actual inflation
> ")) ///
>         ytitle("Inflation") xtitle(Quarters)
  5.     graph export ../output/kalman_ma_comp.pdf, replace
  6. end

. 
. program load_kalman
  1.     tempfile filter smoother
  2.     foreach f in smoother filter  {
  3.         import delimited using ../output/`f'_s.csv, clear
  4.         save ``f'', replace
  5.     }
  6.     merge 1:1 _n using `smoother', nogen
  7. end

. 
. * Execute
. main
(encoding automatically selected: ISO-8859-1)
(1 var, 252 obs)
(file /var/folders/4c/nxhnm_sn7sn7bjc0_wz5f_0m0000gn/T//St99947.000002 not
    found)
file /var/folders/4c/nxhnm_sn7sn7bjc0_wz5f_0m0000gn/T//St99947.000002 saved
    as .dta format
(encoding automatically selected: ISO-8859-1)
(1 var, 252 obs)
(file /var/folders/4c/nxhnm_sn7sn7bjc0_wz5f_0m0000gn/T//St99947.000001 not
    found)
file /var/folders/4c/nxhnm_sn7sn7bjc0_wz5f_0m0000gn/T//St99947.000001 saved
    as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               252  
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             4
        from master                         0  
        from using                          4  

    Matched                               252  
    -----------------------------------------
(4 missing values generated)
file ../output/kalman_ma_comp.pdf saved as PDF format

. 
end of do-file
